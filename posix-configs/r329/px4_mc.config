#!/bin/sh
# PX4 commands need the 'px4-' prefix in bash.
# (px4-alias.sh is expected to be in the PATH)
. px4-alias.sh

param select eeprom/parameters
param import

# system_power not implemented
param set CBRK_SUPPLY_CHK 894281

param set-default BAT1_V_DIV 5.7

# broadcast to LAN
# always keep current config
param set SYS_AUTOCONFIG 0
# useless but required for parameter completeness
param set MAV_TYPE 2
param set SYS_AUTOSTART 4001

dataman start

load_mon start

battery_status start

# internal IMU
icm20602 -s -R 6 start
icm20689 -s -R 4 start
ms5611 -s start

ist8310 -X -R 10 start
ina226 -I -t 1 -k start

linux_pwm_out start
mixer load /dev/pwm_output0 etc/mixers/quad_x.main.mix

rc_input start -d /dev/ttyS2

rc_update start
sensors start
commander start
navigator start
ekf2 start
land_detector start multicopter
mc_hover_thrust_estimator start
flight_mode_manager start
mc_pos_control start
mc_att_control start
mc_rate_control start

mavlink start -x -u 14556 -r 1000000 -p

logger start -t -b 200

mavlink boot_complete
